{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./bookmarklet/bookmarklet.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_","methods","cacheUserDetailUuid","cacheTaskIdAndProjectId","Map","xhrGet","url","xhr","method","json","request","XMLHttpRequest","Promise","resolve","reject","onreadystatechange","readyState","status","responseText","statusText","open","setRequestHeader","send","createContent","idCss","idHtml","clear","forEach","id","document","querySelectorAll","element","parentNode","removeChild","link","createElement","rel","type","href","Date","getTime","media","onload","head","appendChild","then","idInput","idSelectType","idButtonBook","idButtonClear","idButtonClose","idLoader","dummy","innerHTML","body","querySelector","setTimeout","getElementById","focus","addEventListener","e","preventDefault","content","originalEvent","clipboardData","getData","execCommand","onclick","input","span","string","innerText","trim","length","setEnabled","isEnabled","disabled","contentEditable","style","visibility","selectType","timesheetTypeUuid","options","selectedIndex","linePrevious","lineArray","split","synchronizedLineProcessor","statusOfPreviousLine","scrollTop","scrollHeight","shift","line","callback","properties","isNaN","charAt","stringDate","substr","stringTimeBegin","stringTimeEnd","indexOfPipe","indexOf","stringJiraKey","substring","stringComment","integerYearCurrent","getFullYear","integerYear","parseInt","integerMonth","integerDay","date","setFullYear","getMonth","getDate","isInvaliDigit","stringTime","isInvalidHour","integerHour","isInvalidMinute","integerMinute","integerHourBegin","integerHourEnd","integerMinuteBegin","integerMinuteEnd","jiraKey","APP_BeginTime","APP_EndTime","APP_Description","nextStep","APP_UserDetailUuid","response","JSON","parse","console","log","cache","APP_TaskUuid","APP_ProjectUuid","xhrPost","stringify","USR_TimesheetTypeUuid","catch","error","createEntity","has","set","queryTaskIdAndProjectIdForJiraKey","checkIfEntityWithEqualBeginOrEndTimeAlreadyExists","useruuid","queryUserId","checkLineAndParseProperties","refreshButton","click","onkeydown","event","window","keyCode","undefined","location","origin","main"],"mappings":"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","file":"com.dynatrace.timetracking.bookmarklet.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import './bookmarklet.css';\n\n// console.clear();\n\nfunction main() {\n  if (window['COM_KAMILSARELO_DYNATRACE_TIMETRACKING_FORK_RUNNING']) {\n    console.log('ERROR: bookmarklet is already running');\n    return; // https://stackoverflow.com/questions/550574/how-to-terminate-the-script-in-javascript\n  }\n  window['COM_KAMILSARELO_DYNATRACE_TIMETRACKING_FORK_RUNNING'] = true; // global scope var, https://stackoverflow.com/questions/9521298/verify-external-script-is-loaded\n\n  console.log('bookmarklet called');\n\n  const url = 'https://dynatrace.timecockpit.com';\n\n  if (window.location.origin !== url) {\n    const dummy = document.createElement('dummy');\n    dummy.innerHTML = `\n\t\t\t<div style=\"position: fixed; top: 0; bottom: 0; left: 0; right: 0; z-index: 999; background-color: rgba(0, 0, 0, 0.66); display: grid;\">\n\t\t\t\t<div style=\"margin: auto; padding: 24px; box-sizing: border-box; font-size: 24px; background-color: yellow; border-radius: 4px; font-family: Roboto, 'Segoe UI', BlinkMacSystemFont, system-ui, -apple-system, Arial, Helvetica, sans-serif;\">\n\t\t\t\t\t...redirecting to ' + url + '. Run the bookmarklet again after the site loaded.\n\t\t\t\t</div>\n\t\t\t</div>`;\n    document.body.appendChild(dummy.querySelector('div')); // https://developer.mozilla.org/de/docs/Web/API/Document/body and https://stackoverflow.com/questions/9614932/best-way-to-create-large-static-dom-elements-in-javascript\n\n    window.setTimeout(function () {\n      // https://stackoverflow.com/questions/18048338/how-can-i-execute-a-script-after-calling-window-location-href\n      // window.onload = function () { ... cannot be performed after the redirect\n      window.location.href = url;\n    }, 1000);\n  } else {\n    if (document.readyState && document.readyState === 'complete') {\n      _.createContent();\n    } else {\n      window['COM_KAMILSARELO_DYNATRACE_TIMETRACKING_FORK_RUNNING'] = false;\n    }\n  }\n}\n\nvar _ = (function () {\n  // https://gomakethings.com/creating-your-own-vanilla-js-helper-library-like-lodash-and-underscore.js/\n  'use strict';\n  const methods: any = {};\n\n  // caches\n  let cacheUserDetailUuid;\n  const cacheTaskIdAndProjectId = new Map();\n\n  const statusOfPreviousLineDone = 'done';\n\n  methods.createContent = function () {\n    const idCss = 'com_kamilsarelo_dynatrace_timetracking_css';\n    const idHtml = 'com_kamilsarelo_dynatrace_timetracking_html'; // https://stackoverflow.com/questions/6028211/what-is-the-standard-naming-convention-for-html-css-ids-and-classes/37797488#37797488\n\n    // clear previous instances\n    function clear() {\n      // or:  const clear = function() {\n      [idHtml, idCss].forEach(function (id) {\n        document.querySelectorAll('#' + id).forEach(function (element) {\n          element.parentNode.removeChild(element); //https://stackoverflow.com/questions/8830839/javascript-dom-remove-element/8830882\n        });\n      });\n    }\n    clear();\n\n    (function () {\n      // or: function loadCss() { | const loadCss = function() {\n      return new Promise(function (resolve, reject) {\n        // https://stackoverflow.com/questions/574944/how-to-load-up-css-files-using-javascript/51183077#51183077\n\n        // CSS\n\n        const link = document.createElement('link');\n        link.id = idCss;\n        link.rel = 'stylesheet';\n        link.type = 'text/css';\n        // link.href = 'https://localhost/bookmarklet.css';\n        // link.href = 'https://cdn.jsdelivr.net/gh/kamilsarelo/timetracking/bookmarklet/bookmarklet.css';\n        link.href =\n          'https://christian-fischer.github.io/com.dynatrace.timetracking.bookmarklet.css?q=' +\n          new Date().getTime();\n        link.media = 'all';\n        link.onload = function () {\n          // https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onload and https://stackoverflow.com/questions/6348494/addeventlistener-vs-onclick/6348533#6348533\n          resolve();\n        };\n        document.head.appendChild(link); // https://developer.mozilla.org/de/docs/Web/API/Document/head\n      });\n    })() // anonymous function call: https://stackoverflow.com/questions/7498361/defining-and-calling-function-in-one-step\n      .then(function () {\n        // or: // loadCss().then(function () {\n\n        // HTML\n\n        const idContent = 'com_kamilsarelo_dynatrace_timetracking_content';\n        const idHeader = 'com_kamilsarelo_dynatrace_timetracking_header';\n        const idMain = 'com_kamilsarelo_dynatrace_timetracking_main';\n        const idInput = 'com_kamilsarelo_dynatrace_timetracking_input';\n        const idFooter = 'com_kamilsarelo_dynatrace_timetracking_footer';\n        const idFooterLeft =\n          'com_kamilsarelo_dynatrace_timetracking_footer_left';\n        const idFooterRight =\n          'com_kamilsarelo_dynatrace_timetracking_footer_right';\n        const idSelectType =\n          'com_kamilsarelo_dynatrace_timetracking_select_type';\n        const idButtonBook =\n          'com_kamilsarelo_dynatrace_timetracking_action_book';\n        const idButtonClear =\n          'com_kamilsarelo_dynatrace_timetracking_action_clear';\n        const idButtonClose =\n          'com_kamilsarelo_dynatrace_timetracking_action_close';\n        const idLoader = 'com_kamilsarelo_dynatrace_timetracking_loader';\n\n        const dummy = document.createElement('dummy');\n        dummy.innerHTML = `\n\t\t\t\t\t<div id=\"${idHtml}\">\n\t\t\t\t\t\t<div id=\"${idContent}\">\n\t\t\t\t\t\t\t<div id=\"${idHeader}\">\n\t\t\t\t\t\t\t\t<select id=\"${idSelectType}\" class=\"filament-select-css\">\n\t\t\t\t\t\t\t\t\t<option value=\"cd4f750b-85f8-41f8-b193-9c82e23f82eb\" selected=\"selected\">Office</option>\n\t\t\t\t\t\t\t\t\t<option value=\"0ad94cf7-955c-45dc-b49e-20be0f449b75\">Home Office</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id=\"${idMain}\">\n\t\t\t\t\t\t\t\t<div id=\"${idInput}\" contenteditable=\"true\">\n\t\t\t\t\t\t\t\t\t&#xfeff;\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div id=\"${idLoader}\">\n\t\t\t\t\t\t\t\t\t<div class=\"spin-wrapper\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"spinner\">\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id=\"${idFooter}\">\n\t\t\t\t\t\t\t\t<button id=\"${idButtonBook}\" class=\"pure-material-button-contained\">Book</button>\n\t\t\t\t\t\t\t\t<button id=\"${idButtonClear}\" class=\"pure-material-button-outlined\">Clear</button>\n\t\t\t\t\t\t\t\t<button id=\"${idButtonClose}\" class=\"pure-material-button-outlined\">Close</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>`;\n        document.body.appendChild(dummy.querySelector('div'));\n\n        setTimeout(function () {\n          // must be deferred, https://stackoverflow.com/questions/18509507/why-use-settimeout-in-deferred\n          document.getElementById(idInput).focus();\n        }, 0);\n\n        // document.getElementById(idInput).addEventListener('paste', function (e) { // https://stackoverflow.com/questions/21257688/paste-rich-text-into-content-editable-div-and-only-keep-bold-and-italics-formatt\n        // \te.preventDefault();\n        // \tconst clipboardData = e.clipboardData;\n        // \tconst dataText = clipboardData.getData('text/plain');\n        // \tif (dataText && dataText.trim().length != 0) {\n        // \t\tdocument.getElementById(idInput).innerText = dataText;\n        // \t\treturn false; // prevent returning text in clipboard\n        // \t}\n        // }, false);\n        //\n        // ...this is good, but the following is better...\n        //\n        document\n          .getElementById(idInput)\n          .addEventListener('paste', function (e) {\n            // https://stackoverflow.com/questions/12027137/javascript-trick-for-paste-as-plain-text-in-execcommand/19327995#19327995\n            e.preventDefault();\n            const content = (\n              (e as any).originalEvent || e\n            ).clipboardData.getData('text/plain');\n            document.execCommand('insertText', false, content);\n          });\n\n        document.getElementById(idButtonBook).onclick = function () {\n          const input = document.getElementById(idInput);\n\n          // remove all html except line breaks\n          input.querySelectorAll('span').forEach(function (span) {\n            // also: ... .forEach(span => { ...\n            input.removeChild(span);\n          });\n\n          const string = input.innerText; // or https://developer.mozilla.org/de/docs/Web/API/Node/textContent but textContent ignores line breaks\n          if (string.trim().length === 0) {\n            return;\n          }\n\n          function setEnabled(isEnabled) {\n            [idButtonBook, idButtonClear, idButtonClose].forEach(function (id) {\n              (document.getElementById(id) as any).disabled = !isEnabled;\n            });\n            input.contentEditable = isEnabled;\n            input.focus();\n            document.getElementById(idLoader).style.visibility = isEnabled\n              ? 'hidden'\n              : 'visible';\n          }\n          setEnabled(false);\n\n          const selectType = document.getElementById(idSelectType);\n          const timesheetTypeUuid = (selectType as any).options[\n            (selectType as any).selectedIndex\n          ].value;\n\n          input.innerHTML = '';\n          let linePrevious;\n\n          const lineArray = string.split(/\\r\\n|\\r|\\n/g); // also string.split(/\\r?\\n/g); but mind: https://stackoverflow.com/questions/21711768/split-string-in-javascript-and-detect-line-break/21712066#21712066\n          // lineArray.forEach(function (line) { ...\n          // the whole booking process has to be done sequential via synchronous xhr (xhr is parallel/async by default),\n          // so caches can work, AND most importantly no duplicate entities are created\n          // but synchronous xhr should be used in workers exclusively: https://xhr.spec.whatwg.org/#synchronous-flag\n          // ...thus forEach cannot be used\n          //\n          // \"Synchronous XMLHttpRequest outside of workers is in the process of being removed from the web platform\n          // as it has detrimental effects to the end user’s experience. (This is a long process that takes many years.)\n          // Developers must not pass false for the async argument when current global object is a Window object.\n          // User agents are strongly encouraged to warn about such usage in developer tools\n          // and may experiment with throwing an \"InvalidAccessError\" DOMException when it occurs.\"\n          //\n          // ...thus let's simulate synchronours xhr with a mutex callback... https://www.mkyong.com/java/java-thread-mutex-and-semaphore-example/\n          const synchronizedLineProcessor = function (\n            statusOfPreviousLine?: any,\n          ) {\n            if (linePrevious) {\n              input.innerHTML =\n                (input.innerHTML ? input.innerHTML + '<br>' : '') +\n                (statusOfPreviousLine\n                  ? '<span class=\"pill\" style=\"background-color: ' +\n                    (statusOfPreviousLine === statusOfPreviousLineDone\n                      ? 'green'\n                      : 'red') +\n                    ';\">' +\n                    statusOfPreviousLine +\n                    '</span>'\n                  : '') +\n                linePrevious;\n              input.scrollTop = input.scrollHeight; // https://stackoverflow.com/questions/40495860/how-to-scroll-to-automatically-scroll-to-the-bottom-of-an-editable-div-onload/40506676#40506676\n            }\n            if (lineArray.length > 0) {\n              linePrevious = lineArray.shift(); // https://love2dev.com/blog/javascript-remove-from-array/\n              checkLineAndParseProperties(\n                linePrevious,\n                timesheetTypeUuid,\n                synchronizedLineProcessor,\n              ); // first step, forwards to consecutive steps\n            } else {\n              setEnabled(true);\n              const refreshButton = document.querySelector(\n                'button[ng-click=\"refresh()\"]',\n              );\n              if (refreshButton) {\n                (refreshButton as any).click();\n              }\n            }\n          };\n          setTimeout(function () {\n            // must be deferred\n            synchronizedLineProcessor();\n          }, 0);\n        };\n\n        document.getElementById(idButtonClear).onclick = function () {\n          // https://stackoverflow.com/questions/6348494/addeventlistener-vs-onclick\n          const input = document.getElementById(idInput);\n          input.innerHTML = ''; // https://stackoverflow.com/questions/3450593/how-do-i-clear-the-content-of-a-div-using-javascript\n          input.focus();\n        };\n\n        document.getElementById(idButtonClose).onclick = function () {\n          clear();\n        };\n\n        document.onkeydown = function (event: any) {\n          event = event || window.event;\n          if (event.keyCode == 27) {\n            // ESC key\n            clear();\n            document.onkeydown = undefined; // deregister\n          }\n        };\n\n        window['COM_KAMILSARELO_DYNATRACE_TIMETRACKING_FORK_RUNNING'] = false;\n      });\n  };\n\n  function checkLineAndParseProperties(line, timesheetTypeUuid, callback) {\n    line = line.trim();\n    if (!line) {\n      callback(); // no error on empty line\n      return;\n    }\n\n    const properties = (function () {\n      //anonymous function in order to use \"return\" and no need to deferred call of callback before each return\n      // basic sanity checks:\n      // 2019-03-11|12:00|16:00|...|...\n      // 0123456789 123456789 123456789\n      if (\n        !line || // not: null undefined NaN \"\" 0 false: https://stackoverflow.com/questions/5515310/is-there-a-standard-function-to-check-for-null-undefined-or-blank-variables-in/5515349#5515349\n        line.length <= 23 || // first 23 characters are fixed width: date, time, time\n        isNaN(line.charAt(0)) || // first character must be a number: https://stackoverflow.com/questions/8935632/check-if-character-is-number\n        '|' !== line.charAt(10) ||\n        '|' !== line.charAt(16) ||\n        '|' !== line.charAt(22)\n      ) {\n        return;\n      }\n\n      // date and times\n      const stringDate = line.substr(0, 10); // https://www.w3schools.com/jsref/jsref_obj_string.asp\n      const stringTimeBegin = line.substr(11, 5);\n      const stringTimeEnd = line.substr(17, 5);\n      // Jira key\n      const indexOfPipe = line.indexOf('|', 23);\n      if (indexOfPipe === -1) {\n        // no delimiter after Jira key\n        return;\n      }\n      const stringJiraKey = line.substring(23, indexOfPipe); // https://stackoverflow.com/questions/2243824/what-is-the-difference-between-string-slice-and-string-substring\n      if (stringJiraKey === '') {\n        return;\n      }\n      // comment\n      const stringComment = line.substr(indexOfPipe + 1);\n      if (stringComment === '') {\n        // empty comment\n        return;\n      }\n\n      {\n        // date sanity checks\n        // valid delimiters\n        if ('-' !== stringDate.charAt(4) || '-' !== stringDate.charAt(7)) {\n          return;\n        }\n        // valid digits: https://stackoverflow.com/questions/175739/built-in-way-in-javascript-to-check-if-a-string-is-a-valid-number\n        if (\n          isNaN(stringDate.charAt(0)) ||\n          isNaN(stringDate.charAt(1)) ||\n          isNaN(stringDate.charAt(2)) ||\n          isNaN(stringDate.charAt(3)) ||\n          isNaN(stringDate.charAt(5)) ||\n          isNaN(stringDate.charAt(6)) ||\n          isNaN(stringDate.charAt(8)) ||\n          isNaN(stringDate.charAt(9))\n        ) {\n          return;\n        }\n        // valid year\n        const integerYearCurrent = new Date().getFullYear();\n        const integerYear = parseInt(stringDate.substr(0, 4), 10);\n        // if (isNaN(integerYear) || integerYear < 2019 || integerYear > 2046) {\n        if (\n          isNaN(integerYear) ||\n          integerYear < integerYearCurrent ||\n          integerYear > integerYearCurrent\n        ) {\n          return;\n        }\n        // valid month\n        const integerMonth = parseInt(stringDate.substr(5, 2), 10);\n        if (isNaN(integerYear) || integerMonth < 1 || integerMonth > 12) {\n          return;\n        }\n        // valid day\n        const integerDay = parseInt(stringDate.substr(8, 2), 10);\n        if (isNaN(integerYear) || integerDay < 1 || integerDay > 31) {\n          return;\n        }\n        // valid date\n        if (\n          (function () {\n            const date = new Date();\n            date.setFullYear(integerYear, integerMonth - 1, integerDay);\n            return (\n              date.getFullYear() !== integerYear ||\n              date.getMonth() !== integerMonth - 1 ||\n              date.getDate() !== integerDay\n            ); // https://ctrlq.org/code/20109-javascript-date-valid\n          })()\n        ) {\n          return;\n        }\n      }\n\n      {\n        // time sanity checks\n        function isInvaliDigit(stringTime) {\n          return (\n            isNaN(stringTime.charAt(0)) ||\n            isNaN(stringTime.charAt(1)) ||\n            isNaN(stringTime.charAt(3)) ||\n            isNaN(stringTime.charAt(4))\n          );\n        }\n        function isInvalidHour(integerHour) {\n          return isNaN(integerHour) || integerHour < 0 || integerHour > 23;\n        }\n        function isInvalidMinute(integerMinute) {\n          return (\n            isNaN(integerMinute) || integerMinute < 0 || integerMinute > 59\n          );\n        }\n        // valid delimiters\n        if (\n          ':' !== stringTimeBegin.charAt(2) ||\n          ':' !== stringTimeEnd.charAt(2)\n        ) {\n          return;\n        }\n        // valid digits\n        if (isInvaliDigit(stringTimeBegin) || isInvaliDigit(stringTimeEnd)) {\n          return;\n        }\n        // valid hours\n        const integerHourBegin = parseInt(stringTimeBegin.substr(0, 2), 10);\n        const integerHourEnd = parseInt(stringTimeEnd.substr(0, 2), 10);\n        if (isInvalidHour(integerHourBegin) || isInvalidHour(integerHourEnd)) {\n          return;\n        }\n        // valid minutes\n        const integerMinuteBegin = parseInt(stringTimeBegin.substr(3, 2), 10);\n        const integerMinuteEnd = parseInt(stringTimeEnd.substr(3, 2), 10);\n        if (\n          isInvalidMinute(integerMinuteBegin) ||\n          isInvalidMinute(integerMinuteEnd)\n        ) {\n          return;\n        }\n        // begin actually before end\n        if (\n          integerHourBegin > integerHourEnd ||\n          (integerHourBegin === integerHourEnd &&\n            integerMinuteBegin >= integerMinuteEnd)\n        ) {\n          return;\n        }\n      }\n\n      const APP_BeginTime = stringDate + 'T' + stringTimeBegin + ':00';\n      const APP_EndTime = stringDate + 'T' + stringTimeEnd + ':00';\n      // const APP_Description = encodeURIComponent(stringComment); // encoding not necessary, https://stackoverflow.com/questions/332872/encode-url-in-javascript/6171234#6171234\n      const APP_Description = stringComment;\n\n      return {\n        // https://stackoverflow.com/questions/12272239/javascript-function-returning-an-object\n        jiraKey: stringJiraKey,\n        APP_BeginTime: APP_BeginTime,\n        APP_EndTime: APP_EndTime,\n        APP_Description: APP_Description,\n      };\n    })();\n    if (properties) {\n      properties['USR_TimesheetTypeUuid'] = timesheetTypeUuid;\n\n      // console.log('properties');\n      // console.log('  jiraKey               = ' + properties.jiraKey);\n      // console.log('  APP_BeginTime         = ' + properties.APP_BeginTime);\n      // console.log('  APP_EndTime           = ' + properties.APP_EndTime);\n      // console.log('  APP_Description       = ' + properties.APP_Description);\n      // console.log('  USR_TimesheetTypeUuid = ' + properties.USR_TimesheetTypeUuid);\n\n      queryUserId(properties, callback);\n    } else {\n      callback('invalid');\n    }\n  }\n\n  function queryUserId(properties, callback) {\n    function nextStep() {\n      properties.APP_UserDetailUuid = cacheUserDetailUuid;\n      // console.log('APP_UserDetailUuid = ' + properties.APP_UserDetailUuid);\n\n      checkIfEntityWithEqualBeginOrEndTimeAlreadyExists(properties, callback);\n    }\n    if (cacheUserDetailUuid) {\n      nextStep(); // not deferred, because async xhr starts immediately in next step\n      return; // avoid running callback too early\n    }\n    xhrGet('/shell/user')\n      .then(function (response: string) {\n        // console.log(response);\n        const json = JSON.parse(response);\n        if (json) {\n          if (json.useruuid) {\n            cacheUserDetailUuid = json.useruuid;\n            nextStep();\n            return; // avoid running callback too early\n          } else {\n            console.log('ERROR: no useruuid available');\n          }\n        } else {\n          console.log('ERROR: on JSON.parse() in queryUserId()');\n        }\n        callback('error');\n      })\n      .catch(function (error) {\n        console.log('ERROR: in queryUserId()', error);\n        callback(error.status || 'error');\n      });\n  }\n\n  function checkIfEntityWithEqualBeginOrEndTimeAlreadyExists(\n    properties,\n    callback,\n  ) {\n    xhrGet(\n      '/odata/APP_Timesheet' +\n        \"?$filter=(APP_BeginTime eq datetime'\" +\n        properties.APP_BeginTime +\n        \"'\" +\n        \" or APP_EndTime eq datetime'\" +\n        properties.APP_EndTime +\n        \"')\" +\n        \" and APP_UserDetailUuid eq guid'\" +\n        properties.APP_UserDetailUuid +\n        \"'\",\n    )\n      .then(function (response) {\n        // console.log(response);\n        const json = JSON.parse(response);\n        if (json && json.value) {\n          if (json.value.length > 0) {\n            console.log(\n              'ERROR: APP_Timesheet entity with equal start- (' +\n                properties.APP_BeginTime +\n                ') and/or end-time (' +\n                properties.APP_EndTime +\n                ') exists',\n            );\n            callback('exists');\n            return;\n          } else {\n            queryTaskIdAndProjectIdForJiraKey(properties, callback);\n            return; // avoid running callback too early\n          }\n        } else {\n          console.log(\n            'ERROR: on JSON.parse() in checkIfEntityWithEqualBeginOrEndTimeAlreadyExists()',\n          );\n        }\n        callback('error');\n      })\n      .catch(function (error) {\n        console.log(\n          'ERROR: in checkIfEntityWithEqualBeginOrEndTimeAlreadyExists()',\n          error,\n        );\n        callback(error.status || 'error');\n      });\n  }\n\n  function queryTaskIdAndProjectIdForJiraKey(properties, callback) {\n    function nextStep() {\n      const cache = cacheTaskIdAndProjectId.get(properties.jiraKey);\n      properties.APP_TaskUuid = cache.APP_TaskUuid;\n      properties.APP_ProjectUuid = cache.APP_ProjectUuid;\n\n      // console.log('  APP_TaskUuid          = ' + properties.APP_TaskUuid);\n      // console.log('  APP_ProjectUuid       = ' + properties.APP_ProjectUuid);\n\n      createEntity(properties, callback);\n    }\n    if (cacheTaskIdAndProjectId.has(properties.jiraKey)) {\n      nextStep(); // not deferred, because async xhr starts immediately in next step\n      return; // avoid running callback too early\n    }\n    xhrGet(\n      '/odata/APP_Task' +\n        \"?$filter=APP_Code eq '\" +\n        properties.jiraKey +\n        \"'\" +\n        '&$select=APP_TaskUuid,APP_ProjectUuid',\n    )\n      .then(function (response) {\n        const json = JSON.parse(response); // https://stackoverflow.com/questions/33169315/json-parse-selecting-from-a-select-container\n        if (json && json.value) {\n          if (json.value.length > 0) {\n            cacheTaskIdAndProjectId.set(properties.jiraKey, {\n              APP_TaskUuid: json.value[0].APP_TaskUuid,\n              APP_ProjectUuid: json.value[0].APP_ProjectUuid,\n            });\n            nextStep();\n            return; // avoid running callback too early\n          } else {\n            console.log(\n              'ERROR: no APP_Task entity for specified Jira key (' +\n                properties.jiraKey +\n                ') available',\n            );\n          }\n        } else {\n          console.log(\n            'ERROR: on JSON.parse() in queryTaskIdAndProjectIdForJiraKey()',\n          );\n        }\n        callback('error');\n      })\n      .catch(function (error) {\n        console.log('ERROR: in queryTaskIdAndProjectIdForJiraKey()', error);\n        callback(error.status || 'error');\n      });\n  }\n\n  function createEntity(properties, callback) {\n    const json = JSON.stringify({\n      // 'APP_TimesheetUuid': https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript/2117523#2117523\n      APP_BeginTime: properties.APP_BeginTime,\n      APP_EndTime: properties.APP_EndTime,\n      APP_Description: properties.APP_Description,\n      APP_TaskUuid: properties.APP_TaskUuid,\n      APP_ProjectUuid: properties.APP_ProjectUuid,\n      APP_UserDetailUuid: properties.APP_UserDetailUuid,\n      USR_TimesheetTypeUuid: properties.USR_TimesheetTypeUuid,\n      // 'APP_IsDurationTimesheet': false,\n      // 'APP_NoBilling': false,\n      // 'USR_MedicalConfirmationReceived': false\n    });\n    xhrPost('/odata/APP_Timesheet', json)\n      .then(function (response) {\n        // console.log('booked');\n        callback(statusOfPreviousLineDone);\n      })\n      .catch(function (error) {\n        console.log('ERROR: in createEntity()', error);\n        callback(error.status || 'error');\n      });\n  }\n\n  function deleteEntity(APP_TimesheetUuid) {\n    xhrDelete(\"/odata/APP_Timesheet(guid'\" + APP_TimesheetUuid + \"')\")\n      .then(function (response) {\n        console.log(\n          'deleted APP_Timesheet entity with UUID: ' + APP_TimesheetUuid,\n        );\n      })\n      .catch(function (error) {\n        console.log('ERROR: in deleteEntity()', error);\n      });\n  }\n\n  function xhrGet(url): Promise<string> {\n    return xhr(url);\n  }\n\n  function xhrPost(url, json): Promise<string> {\n    return xhr(url, 'POST', json);\n  }\n\n  function xhrDelete(url): Promise<string> {\n    return xhr(url, 'DELETE');\n  }\n\n  function xhr(url, method?, json?): Promise<string> {\n    const request = new XMLHttpRequest();\n    return new Promise(function (resolve, reject) {\n      request.onreadystatechange = function () {\n        if (request.readyState !== 4) return; // 4 is DONE, https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/readyState\n        if (request.status >= 200 && request.status < 300) {\n          // console.dir(request);\n          // console.log(response);\n          // resolve(request);\n          resolve(request.responseText);\n        } else {\n          reject({\n            status: request.status,\n            statusText: request.statusText,\n          });\n        }\n      };\n      request.open(method || 'GET', url, true);\n      request.setRequestHeader('cache-control', 'no-cache'); // https://stackoverflow.com/a/48969579\n      request.setRequestHeader('cache-control', 'max-age=0');\n      request.setRequestHeader('pragma', 'no-cache');\n      if (method === 'POST') {\n        // if (json) {\n        request.setRequestHeader(\n          'Content-Type',\n          'application/json; charset=utf-8',\n        );\n        request.send(json);\n      } else {\n        request.send();\n      }\n    });\n  }\n\n  return methods;\n})();\n\nmain();\n"],"sourceRoot":""}